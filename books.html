<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reading List - charlie.onl</title>

    <!-- Styles -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
    <link rel="stylesheet" href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />

    <style>
      html, body {
          background-color: #3083b6;
          font-family: 'Varela Round', sans-serif;
      }
    </style>

    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@2.x.x/dist/alpine.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/4.1.0/js-yaml.min.js" integrity="sha512-CSBhVREyzHAjAFfBlIBakjoRUKp5h7VSweP0InR/pAJyptH7peuhCsqAI/snV+TwZmXZqoUklpXp6R6wMnYf5Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  </head>
<body>

  <body>
      
      <div class="flex mx-auto flex-col items-center px-8 md:px-32 py-24">

        <div class="text-center w-full">
          <h1 class="font-bold text-lg mb-2 text-white">Reading List</h1>
          <div class="m-auto w-1/6 h-0.5 bg-green-200 mt-3 mb-2"></div>
          <a class="pl-2 text-green-200 hover:text-green-400" href="/">üè†Homeüè†</a>
        </div>

        <div class="flex flex-wrap" x-data="init()" x-init="fetchReadingList()">
          <template x-for="book in readingListData">
            <div class="cursor-pointer w-1/4">
              <div class="">
                <h4 class="mt-5 font-bold" x-text="book.title"></h4>
                <div x-text="book.isbn"></div>
              </div>

              <template x-if="book.info.covers">
                <img class="shadow-xl" :src="`https://covers.openlibrary.org/b/isbn/${book.isbn}-M.jpg`" alt="">
              </template>
              <template x-if="!book.info.covers">
                <p>NO COVER</p>
              </template>
            </div>
          </template>
        </div>
      </div>
    </body>

    <script type="text/javascript">
      function init() {
        return {
          loaded: false,
          readingListData: {},
          fetchReadingList() {
            fetch(`./data/readinglist.yaml`)
              .then(res => res.text())
              .then(data => {
                this.readingListData = jsyaml.load(data)

                this.readingListData.forEach(i => {
                  fetch(`https://openlibrary.org/isbn/${i.isbn}.json`).then(res => res.json()).then(data => {
                    i.info = data;
                  })
                })

                this.loaded = true

              });
          }
        }
      }
    </script>
</body>
</html>